[![Review Assignment Due Date](https://classroom.github.com/assets/deadline-readme-button-22041afd0340ce965d47ae6ef1cefeee28c7c493a6346c4f15d667ab976d596c.svg)](https://classroom.github.com/a/gzJIz4g7)
## برنامه سازی پیشرفته
### تمرین دوم

### مدرس: راضیه قیاسی
### طراحان: مهراد پوریوسف، مهرناز حسینی، رضا قمی‌الاصل


**طراحی و پیاده‌سازی سیستم مدیریت کتابخانه پیشرفته**

هدف از این پروژه، طراحی و پیاده‌سازی یک سامانه‌ی جامع مدیریت کتابخانه با رویکرد ماژولار، قابل توسعه و کاربرپسند است. این سیستم باید بتواند وظایف مختلفی از جمله مدیریت منابع کتابخانه‌ای، کاربران، فرآیندهای امانت‌دهی و بازپس‌گیری، رزرو کتاب‌ها، محاسبه جریمه‌ها و تولید گزارش‌های آماری را به صورت کامل و دقیق انجام دهد.

**امکانات اصلی سیستم**  
**۱. مدیریت کتاب‌ها**  
هر کتاب دارای ویژگی‌های زیر خواهد بود:

* شناسه یکتا (ID): عدد صحیح منحصر به فرد  
* عنوان کتاب   
* نویسنده  
* دسته‌بندی: انواع مختلف کتاب با ویژگی های مختلف (ارث بری)  
* تاریخ انتشار  
* تعداد صفحات  
* وضعیت کتاب

سلسله‌مراتب کلاس‌ها با استفاده از اصول شی‌گرایی شامل ارث‌بری و چندریختی پیاده‌سازی می‌شود:

* کلاس پایه Book  برای ویژگی‌های عمومی  
* کلاس TextBook  برای کتاب‌های درسی شامل سطح تحصیلی، رشته  
* کلاس Magazine  برای مجلات شامل شماره انتشار  
* کلاس ReferenceBook  برای کتاب‌های مرجع (غیرقابل امانت)

عملیات قابل انجام بر روی کتاب‌ها عبارتند از:

* افزودن، حذف و ویرایش کتاب‌ها با اعتبارسنجی و بررسی وضعیت  
* جستجوی پیشرفته بر اساس عنوان، نویسنده، و دسته‌بندی  
* مرتب‌سازی لیست کتاب‌ها بر اساس عنوان، نویسنده یا تاریخ انتشار

**۲. سیستم کاربران و مجوزها**  
سیستم باید شامل قابلیت احراز هویت کاربران با امکان ثبت‌نام و ورود باشد. دو نوع کاربر اصلی تعریف می‌شود:  
**کاربران عادی (Regular Users) :**

* محدودیت امانت: حداکثر ۵ کتاب به مدت ۱۴ روز  
* قابلیت‌های در دسترس:  
  * امانت و بازگشت کتاب  
  * رزرو کتاب‌  
  * مشاهده تاریخچه امانت  
  * مشاهده وضعیت جریمه‌ها

**کتابداران (Librarians) :**

* دسترسی‌های اضافی:  
  * افزودن و حذف کتاب  
  * مدیریت کاربران و سطوح دسترسی  
  * بررسی و مدیریت جریمه‌ها  
  * مشاهده لاگ‌های سیستم

**۳. سیستم امانت‌دهی و بازپس‌گیری**  
فرآیند امانت شامل مراحل زیر است:

* بررسی وضعیت کتاب و کاربر (موجود بودن، محدودیت امانت، عدم جریمه، مجوز نوع کتاب)  
* ثبت اطلاعات امانت شامل تاریخ امانت، تاریخ بازگشت، شناسه کتاب و کاربر  
* اطلاع‌رسانی به کاربر در خصوص موفقیت عملیات

بازگشت کتاب نیز شامل:

* دریافت کتاب  
* محاسبه جریمه در صورت تأخیر  
* بروزرسانی وضعیت کتاب  
* اطلاع‌رسانی به نفر بعدی در صف رزرو (در صورت وجود)  
* محاسبه جریمه‌ها باید براساس نوع کتاب و میزان تأخیر انجام شود و برای پیاده‌سازی باید از الگوهای طراحی مناسب استفاده شود. نرخ جریمه برای هر نوع کتاب متفاوت است.

**۴. سیستم رزرو کتاب**  
سیستم باید از صف انتظار با ساختار FIFO استفاده کند. ویژگی‌های اصلی رزرو شامل:

* ثبت رزرو برای کتاب‌های امانت داده شده  
* امکان لغو رزرو توسط کاربر  
* اطلاع‌رسانی خودکار به کاربر بعدی پس از بازگشت کتاب  
* نمایش وضعیت صف برای هر کتاب

قوانین رزرو:

* عدم رزرو تکراری: هر کاربر تنها یک‌بار مجاز به رزرو یک کتاب خاص است.  
* حداکثر ظرفیت صف قابل تنظیم (پیش‌فرض ۱۰ نفر)  
* مهلت پاسخ کاربر به پیام رزرو ۲۴ ساعت می‌باشد.

در این بخش از ساختارهای STL و الگوهای طراحی استفاده شود.  
**۵. گزارش‌های آماری و تحلیلی**  
گزارش‌ها باید به‌صورت خودکار تولید شوند و اطلاعات زیر را ارائه دهند:

* کتاب‌های محبوب (براساس بازدید، تعداد امانت، زمان انتظار)  
* کاربران دارای بیشترین جریمه  
* تحلیل سیستم (میانگین زمان امانت، نرخ بازگشت به‌موقع، طول صف‌های انتظار)

**۶. مدیریت فایل‌های CSV**  
سیستم باید توانایی خواندن و نوشتن فایل‌های CSV را داشته باشد:

* خواندن اطلاعات از فایل و تبدیل به اشیاء  
* ذخیره‌سازی اطلاعات اشیاء در قالب CSV  
* پشتیبان‌گیری پیش از اعمال تغییرات ( در صورت نیاز)

در این بخش توصیه می‌شود از templateها برای افزایش انعطاف‌پذیری استفاده شود.   
در صورت تمایل، می‌توانید از یک پایگاه داده SQL ( مانند  SQLite،MySQL  و غیره) برای ذخیره‌سازی و مدیریت داده‌ها استفاده کنید.


**۷. سیستم پیکربندی**
سیستم باید از فایل‌های پیکربندی (INI یا TOML) برای تنظیم پارامترهای مختلف کند:
- **تنظیمات کتابخانه**: حداکثر تعداد امانت، مدت امانت پیش‌فرض، حداکثر صف رزرو
- **تنظیمات جریمه**: نرخ روزانه برای انواع کتاب، حداکثر جریمه قبل از تعلیق
- **تنظیمات اعلان‌ها**: فعال/غیرفعال بودن اعلان‌ها، تعداد روزهای یادآوری
- **تنظیمات سیستم**: مسیر فایل‌ها، سطح لاگ، تنظیمات پشتیبان‌گیری

فایل پیکربندی باید قابل خواندن و ویرایش توسط کاربر باشد.


#### ساختار پروژه
پروژه باید به‌صورت ماژولار و ساختارمند طراحی و پیاده‌سازی شود؛ به گونه‌ای که هر بخش مستقل، قابل توسعه و قابل نگهداری باشد.

لایه‌های نرم‌افزار باید تنها به لایه‌های پایین‌تر خود وابستگی داشته باشند. به عبارت دیگر، معماری پروژه باید لایه‌مند (Layered Architecture) باشد و وابستگی‌ها (Dependencies) از بالا به پایین تعریف شوند.
برای مثال، لایه‌ی منطق کسب‌وکار (Business Logic) می‌تواند به لایه‌ی داده (Data Layer) وابسته باشد، اما بالعکس نباید اتفاق بیفتد.

همچنین توصیه می‌شود که وابستگی‌ها به‌صورت اصولی و واضح از طریق تزریق وابستگی (Dependency Injection) مدیریت شوند، تا از ایجاد وابستگی‌های سفت و سخت (Tight Coupling) جلوگیری شود. این کار به افزایش تست‌پذیری (Testability)، قابلیت نگهداری و انعطاف‌پذیری پروژه کمک می‌کند.

_این یک ساختار نمونه است و اجباری برای آن وجود ندارد_

```
📁 Library Management System
├── 📁 Core Classes
│   ├── Book (Base Class)
│   ├── User Management
│   ├── Transaction System
│   └── Reservation System
├── 📁 Data Layer
│   ├── CSV Handler
│   ├── File Manager
│   └── Data Persistence
├── 📁 Business Logic
│   ├── Loan Management
│   ├── Fine Calculation
│   └── Report Generation
├── 📁 Utilities
│   ├── Logger
│   ├── Exception Handler
│   └── Configuration Manager
└── 📁 More...
```


**امکانات اختیاری**  
**۱. سیستم ثبت وقایع (Logging)**   
سیستم باید دارای ساختاری پیشرفته برای ثبت لاگ‌ها شامل سطوح مختلف لاگ(DEBUG, INFO, WARNING, ERROR, CRITICAL)  باشد . الزامات این بخش:

* استفاده از الگوی Singleton برای دسترسی سراسری  
* پیام‌ها شامل  timestamp، سطح لاگ و نام ماژول باشند.  
* امکان تعیین سطح حداقل برای فیلتر لاگ‌ها  
* چرخش خودکار فایل‌های لاگ در صورت افزایش حجم

رویدادهای قابل ثبت شامل ورود و خروج کاربران، خطاها، عملیات سیستمی و تحلیل عملکرد است.  
برای پیاده‌سازی بهتر است از design patterns مناسب و thread-safety استفاده شود.  
**۲. مدیریت استثناها و خطاها**  
برای مدیریت بهتر خطاها، سیستم باید دارای سلسله‌مراتب استثناهای سفارشی مشتق‌شده از std::exception  باشد. همچنین، رعایت اصول زیر ضروری است:

* جلوگیری از توقف کامل سیستم هنگام بروز خطا   (Graceful Degradation)   
* قابلیت بازگشت تراکنش‌ها در صورت وقوع خطا (Transaction Rollback)   
* ارائه پیام‌های کاربرپسند به‌جای پیام‌های فنی  
* تلاش خودکار برای رفع خطاهای ساده

**۳.سیستم امتیازدهی و نظردهی**  
کاربران می‌توانند به کتاب‌ها از ۱ تا ۵ امتیاز دهند، نظر متنی ثبت کنند، میانگین امتیازات نمایش داده شود و از تکرار امتیازدهی جلوگیری گردد. امکان ارائه لیست کتاب‌های برتر نیز وجود داشته باشد.  
**۴.رابط کاربری گرافیکی**  
طراحی رابط گرافیکی باید بصورت responsive (سازگار با اندازه‌های مختلف) و حالت‌های Dark Mode و  Light Mode طراحی شود. می‌توانید از فریم ورک Qt یا کتابخانه های مختلف همچون ImGUI و Raylib استفاده کنید.

**نکات پایانی**

* دقت کنید که کد شما به گونه ای زده شده باشد که نتایج قابلیت بازتولید داشته باشد.  
* این تمرین به‌صورت گروهی انجام می‌شود و هر گروه می‌تواند حداکثر از ۲ نفر تشکیل شود.
* توجه داشته باشید که ۶۰٪ از نمره‌ی پروژه به‌صورت مساوی بین تمامی اعضای گروه تقسیم می‌شود.
    اما ۴۰٪ باقی‌مانده بر اساس میزان مشارکت واقعی (Contribution) هر فرد در مخزن گیت محاسبه خواهد شد.
   منظور از مشارکت، صرفاً تعداد خطوط کد (مانند فایل‌های CPP) نیست؛ بلکه عواملی مانند تداوم فعالیت در طول زمان، کیفیت مشارکت، و نقش فرد در پیشبرد بخش‌های مختلف پروژه نیز در ارزیابی لحاظ خواهند شد.
    در صورتی که اعضای گروه مشارکتی نسبتاً برابر و مستمر داشته باشند، این ۴۰٪ نیز به‌طور مساوی به همه اختصاص داده خواهد شد. اما اگر تفاوت محسوسی در میزان مشارکت وجود داشته باشد، نمره‌ی این بخش متناسب با سهم واقعی هر فرد محاسبه می‌شود.

    بنابراین، لازم است اعضای گروه کامیت‌های خود را به‌درستی، منظم و با پیام‌های واضح ثبت کنند تا سابقه‌ی مشارکت هر فرد به‌روشنی قابل بررسی و ارزیابی باشد.
* پس از مطالعه کامل و دقیق صورت پروژه، در صورت وجود هرگونه ابهام یا سوال با طراحان پروژه در ارتباط باشید.  
* برای طراحی و پیاده‌سازی هر بخش از پروژه، لازم است تسلط کامل بر آن بخش داشته باشید و بتوانید علت انتخاب روش‌ها و مزایای استفاده از آن‌ها را به‌خوبی بیان کنید تا در هنگام تحویل تمرین، آمادگی لازم برای توضیح و ارائه عملکرد بخش‌های مختلف را داشته باشید.  
* نمره این تمرین از ۱۰۰ محاسبه می‌شود و در صورتی که این تمرین به‌صورت کامل و صحیح انجام شود، نمرات امتیازی آن به نمره ی تمرین قبلی اضافه خواهد شد و  کمبود نمره تمرین‌ گذشته را جبران می‌کند.
